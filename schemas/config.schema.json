{
  "$schema": "http://json-schema.org/draft-07/schema#",
  "$ref": "#/definitions/Rules",
  "definitions": {
    "ApiExampleBuilder": {
      "additionalProperties": false,
      "type": "object",
      "description": "Define um exemplo usado para popular campos de DTO durante a geração automática.",
      "properties": {
        "example": {
          "type": ["string", "boolean", "number"],
          "description": "Valor de exemplo a ser usado para os campos especificados."
        },
        "fields": {
          "type": "array",
          "items": { "type": "string" },
          "description": "Lista de nomes de campos onde o exemplo será aplicado."
        }
      },
      "required": ["fields", "example"]
    },

    "ValidatorPath": {
      "type": "string",
      "description": "Caminho (path) para o arquivo/pasta de validators usado pelo gerador."
    },

    "PrismaPath": {
      "type": "string",
      "description": "Caminho (path) para o schema/pasta do Prisma usado pelo gerador (ex: prisma/schemas)."
    },

    "ValidatorBuilder": {
      "additionalProperties": false,
      "type": "object",
      "description": "Define um validador a ser aplicado a determinados campos.",
      "properties": {
        "decorator": {
          "type": "string",
          "description": "Nome do decorator de validação (ex: IsEmail, IsStrongPassword)."
        },
        "fields": {
          "type": "array",
          "items": { "type": "string" },
          "description": "Campos que recebem este validador."
        },
        "inside": {
          "type": "object",
          "description": "Configuração opcional passada para dentro do decorator.",
          "additionalProperties": false,
          "properties": {
            "type": {
              "type": "string",
              "enum": ["number", "string"],
              "description": "Tipo do valor passado para o decorator."
            },
            "content": {
              "description": "Conteúdo passado para o decorator (qualquer tipo)."
            }
          },
          "required": ["type", "content"]
        }
      },
      "required": ["decorator", "fields"]
    },

    "Rules": {
      "additionalProperties": false,
      "type": "object",
      "description": "Configuração principal do DocGen.",
      "properties": {
        "$schema": {
          "type": "string",
          "description": "Caminho para o schema de validação (usado pelo editor para autocomplete)."
        },
        "ignore": {
          "type": "array",
          "items": { "type": "string" },
          "description": "Campos a serem ignorados durante a geração automática de DTOs."
        },
        "validatorPath": {
          "$ref": "#/definitions/ValidatorPath"
        },
        "prismaPath": {
          "$ref": "#/definitions/PrismaPath"
        },
        "examples": {
          "type": "array",
          "items": { "$ref": "#/definitions/ApiExampleBuilder" },
          "description": "Lista de exemplos a serem aplicados a campos específicos."
        },
        "validators": {
          "type": "array",
          "items": { "$ref": "#/definitions/ValidatorBuilder" },
          "description": "Lista de validadores associados a campos específicos."
        }
      },
      "required": ["ignore", "validatorPath", "prismaPath", "examples", "validators"]
    }
  }
}
